"use strict";
!function () {
    function a(b, c) {
        if ("undefined" != typeof b && "undefined" != typeof c) {
            var d = c.indexOf(".");
            return d > -1 ? a(b[c.substring(0, d)], c.substr(d + 1)) : b[c]
        }
    }

    function b(a) {
        return angular.injector(["ng"]).invoke([a, function (a) {
            return a
        }])
    }

    function c() {
        var a = b("$q").defer();
        return a.resolve(), a.promise
    }

    function d() {
    }

    function e() {
        return {open: !1, disabled: !1, beforeOpen: c, beforeHide: c}
    }

    function f() {
        this.groups = [], this.options = {closeOthers: !0}
    }

    function g() {
        return new f
    }

    d.prototype.show = function (a) {
        var c = this;
        b("$q").when(c.options.beforeOpen()).then(function () {
            c.body[a]("slow")
        }, function (a) {
            b("$log").error(a)
        })
    }, d.prototype.hide = function (a) {
        var c = this;
        b("$q").when(c.options.beforeHide()).then(function () {
            c.body[a]()
        }, function (a) {
            b("$log").error(a)
        })
    }, f.prototype.addGroup = function (a) {
        this.groups.push(a)
    }, f.prototype.getGroups = function (a) {
        return this.groups
    }, f.prototype.applyState = function (a) {
        a && (a.options.open ? (a.show("slideDown"), this.closeOthers(a)) : a.hide("slideUp"))
    }, f.prototype.closeOthers = function (a) {
        if (this.options.closeOthers)for (var b = 0; b < this.groups.length; b++)a != this.groups[b] && this.groups[b].hide("slideUp")
    };
    var h = function (b, c) {
        return {
            restrict: "A", link: function (b, c, d, e) {
                var f = a(b, d.options);
                f && angular.extend(e.accordion.options, f), b.$watchCollection(d.options, function (a, b) {
                    a && a !== b && angular.extend(e.accordion.options, a)
                })
            }, controller: function () {
                this.accordion = g()
            }
        }
    }, i = function (a, b) {
        return {
            require: ["^ngAccordion", "ngAccordionGroup"], restrict: "EA", controller: function () {
                var b, c;
                b = a.defer(), c = a.defer(), this.setHeaderElement = function (a) {
                    b.resolve(a)
                }, this.getHeaderElement = function () {
                    return b.promise
                }, this.setBodyElement = function (a) {
                    c.resolve(a)
                }, this.getBodyElement = function () {
                    return c.promise
                }
            }, scope: {options: "="}, link: function (c, f, g, h) {
                var i, j, k, l;
                j = h[1], i = h[0], k = i.accordion, l = new d, c.options || (c.options = e()), l.options = angular.extend(e(), c.options), c.$watchCollection("options", function (a, b) {
                    l.options = angular.extend(e(), a), a && !a.disabled && k.applyState(l)
                }, !0), a.all([j.getHeaderElement(), j.getBodyElement()]).then(function (a) {
                    l.header = a[0], l.body = a[1], c.options.open ? l.show("show") : l.hide("hide"), l.header.on("click", function () {
                        c.options.disabled || (c.options.open = !c.options.open), b(function () {
                            c.$apply()
                        })
                    }), k.addGroup(l)
                })
            }
        }
    }, j = function () {
        return {
            require: "^ngAccordionGroup", restrict: "EA", link: function (a, b, c, d) {
                d.setBodyElement(b)
            }
        }
    }, k = function () {
        return {
            require: "^ngAccordionGroup", restrict: "EA", link: function (a, b, c, d) {
                d.setHeaderElement(b)
            }
        }
    };
    angular.module("uiAccordion", []), angular.module("uiAccordion").directive("ngAccordion", h), angular.module("uiAccordion").directive("ngAccordionGroup", i), angular.module("uiAccordion").directive("ngAccordionBody", j), angular.module("uiAccordion").directive("ngAccordionHeading", k)
}();
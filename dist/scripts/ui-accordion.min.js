"use strict";function fetchFromObject(a,b){if("undefined"!=typeof a&&"undefined"!=typeof b){var c=b.indexOf(".");return c>-1?fetchFromObject(a[b.substring(0,c)],b.substr(c+1)):a[b]}}function Accordion(){this.groups=[],this.options={closeOthers:!0}}function getDefaultAccordion(){return new Accordion}function getService(a){return angular.injector(["ng"]).invoke([a,function(a){return a}])}function noopPromise(){var a=getService("$q").defer();return a.resolve(),a.promise}function AccordionGroup(){}function defaultAccordionGroupOptions(){return{open:!1,disabled:!1}}angular.module("uiAccordion",[]),Accordion.prototype.addGroup=function(a){this.groups.push(a)},Accordion.prototype.getGroups=function(a){return this.groups},Accordion.prototype.toggleState=function(a){if(a)if(a.options.open)a.up("slideUp");else if(a.down("slideDown"),this.options.closeOthers)for(var b=0;b<this.groups.length;b++)a!=this.groups[b]&&this.groups[b].up("slideUp")},Accordion.prototype.applyState=function(a){var b,c;b=a?"up":"down";for(var d=0;d<this.groups.length;d++)c=this.groups[d],c.options.open=a,c[b]()},Accordion.prototype.allUp=function(){this.applyState(!0)},Accordion.prototype.allDown=function(a){this.applyState(!1)},angular.module("uiAccordion").directive("ngAccordion",function(a,b){return{restrict:"A",link:function(a,b,c,d){var e=fetchFromObject(a,c.options);e&&angular.extend(d.accordion.options,e),a.$watchCollection(c.options,function(a,b){a&&a!==b&&angular.extend(d.accordion.options,a)})},controller:function(){this.accordion=getDefaultAccordion()}}}),AccordionGroup.prototype.beforeOpen=noopPromise,AccordionGroup.prototype.beforeHide=noopPromise,AccordionGroup.prototype.down=function(a){var b=this;b.beforeOpen().then(function(){b.body[a]("slow"),b.options.open=!0},function(a){getService("$log").error(a)})},AccordionGroup.prototype.up=function(a){var b=this;b.beforeHide().then(function(){b.options.open=!1,b.body[a]()},function(a){getService("$log").error(a)})},angular.module("uiAccordion").directive("ngAccordionGroup",function(a){return{require:["^ngAccordion","ngAccordionGroup"],restrict:"EA",controller:function(){var b,c;b=a.defer(),c=a.defer(),this.setHeaderElement=function(a){b.resolve(a)},this.getHeaderElement=function(){return b.promise},this.setBodyElement=function(a){c.resolve(a)},this.getBodyElement=function(){return c.promise}},link:function(b,c,d,e){var f,g,h,i,j;g=e[1],f=e[0],h=f.accordion,i=new AccordionGroup,j=fetchFromObject(b,d.options),j?i.options=angular.extend(defaultAccordionGroupOptions(),j):i.options=defaultAccordionGroupOptions(),b.$watchCollection(function(){return j},function(a,b){i.options=angular.extend(defaultAccordionGroupOptions(),a),a!==b&&a.open!==b.open&&(i.options.open=!a.open,h.toggleState(i))}),a.all([g.getHeaderElement(),g.getBodyElement()]).then(function(a){i.header=a[0],i.body=a[1],i.options.open?i.down("show"):i.up("hide"),i.header.on("click",function(){i.options.disabled||h.toggleState(i)}),h.addGroup(i)})}}}),angular.module("uiAccordion").directive("ngAccordionHeading",function(){return{require:"^ngAccordionGroup",restrict:"EA",link:function(a,b,c,d){d.setHeaderElement(b)}}}),angular.module("uiAccordion").directive("ngAccordionBody",function(){return{require:"^ngAccordionGroup",restrict:"EA",link:function(a,b,c,d){d.setBodyElement(b)}}});